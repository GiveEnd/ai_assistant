import gradio as gr

# –ü–æ–∫–∞ –ø—É—Å—Ç–∞—è —Ñ—É–Ω–∫—Ü–∏—è, –≥–¥–µ, –ø—Ä–µ–¥–ø–æ–ª–æ–∂–∏—Ç–µ–ª—å–Ω–æ, –±—É–¥–µ—Ç –ª–æ–≥–∏–∫–∞ —Å–æ–∑–¥–∞–Ω–∏—è –æ–ø–∏—Å–∞–Ω–∏—è
def generate_description(description):
    return "–ö–æ–≥–¥–∞-–Ω–∏–±—É–¥—å –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∫—Ä–∞—Å–∏–≤–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ"


# –û–±—Ä–∞—â–µ–Ω–∏–µ –∫ ai
def chat_response(user_message):
    return '–í–∞—à–µ –æ–ø–∏—Å–∞–Ω–∏–µ: ' + generate_description(user_message)


# –ù–∞–±–æ—Ä –±–ª–æ–∫–æ–≤. –ë–ª–æ–∫–∏ –Ω—É–∂–Ω—ã, —á—Ç–æ–±—ã —Ä–∞–∑–¥–µ–ª—è—Ç—å —Ñ—Ä–∞–≥–º–µ–Ω—Ç—ã —Ä–∞–∑–º–µ—Ç–∫–∏. –ó–¥–µ—Å—å –ø—Ä–∏–Ω—Ü–∏–ø –ø–æ—Ö–æ–∂ –Ω–∞ —Å–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ç–∞–±–ª–∏—Ü –≤ –±–¥.
# Blocks - –∫–∞–∫ –±—ã —Ç–∞–±–ª–∏—Ü–∞. Rows - –µ—ë —Å—Ç—Ä–æ–∫–∏. Columns - —Å—Ç–æ–ª–±—Ü—ã.
with gr.Blocks() as app:
    # –°—Ç—Ä–æ–∫–∞ —Å–æ–¥–µ—Ä–∂–∞—â–∞—è –¥–≤–∞ –æ—Å–Ω–æ–≤–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–∞ - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞—Ä—Ç–æ—á–∫–∏ –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞.
    with gr.Row():
        # –ü–µ—Ä–≤—ã–π –±–ª–æ–∫ - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å –∫–∞—Ä—Ç–æ—á–∫–∏.
        with gr.Column(scale=1):
            gr.Markdown("### üè® –ö–∞—Ä—Ç–æ—á–∫–∞ –æ—Ç–µ–ª—è")
            name = gr.Textbox(label="–ù–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–µ–ª—è", placeholder="–í–≤–µ–¥–∏—Ç–µ –Ω–∞–∑–≤–∞–Ω–∏–µ –æ—Ç–µ–ª—è")
            address = gr.Textbox(label="–ê–¥—Ä–µ—Å", placeholder="–í–≤–µ–¥–∏—Ç–µ –∞–¥—Ä–µ—Å –æ—Ç–µ–ª—è")
            description = gr.Textbox(label="–û–ø–∏—Å–∞–Ω–∏–µ", placeholder="–í–≤–µ–¥–∏—Ç–µ –∫—Ä–∞—Ç–∫–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ...", lines=4)
            gr.Markdown("–ó–∞–≥—Ä—É–∑–∏—Ç–µ –æ–¥–Ω—É –∏–ª–∏ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ñ–æ—Ç–æ–≥—Ä–∞—Ñ–∏–π –æ—Ç–µ–ª—è.")
            photos = gr.Image(label="–§–æ—Ç–æ–≥—Ä–∞—Ñ–∏–∏ –æ—Ç–µ–ª—è")

        # –í—Ç–æ—Ä–æ–π –±–ª–æ–∫ - –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —á–∞—Ç–∞.
        with gr.Column(scale=1):
            gr.Markdown("### üí¨ –ß–∞—Ç")
            chatbot = gr.Chatbot(
                label="–ß–∞—Ç —Å –∞—Å—Å–∏—Å—Ç–µ–Ω—Ç–æ–º",
                value=[
                    {"role": "assistant", "content": "–ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ! –ß–µ–º –º–æ–≥—É –ø–æ–º–æ—á—å –≤ –æ–ø–∏—Å–∞–Ω–∏–∏ –≤–∞—à–µ–≥–æ –æ—Ç–µ–ª—è?"}
                ],
                height=650,
                type="messages"
            )
            message = gr.Textbox(label="–í–∞—à –≤–æ–ø—Ä–æ—Å", placeholder="–°–ø—Ä–æ—Å–∏—Ç–µ —á—Ç–æ-—Ç–æ –æ —Å–æ–∑–¥–∞–Ω–∏–∏ –æ–ø–∏—Å–∞–Ω–∏—è...")
            send_button = gr.Button("–û—Ç–ø—Ä–∞–≤–∏—Ç—å")


        # –û–±—Ä–∞–±–æ—Ç–∫–∞ —Å–æ–±—ã—Ç–∏—è –Ω–∞–∂–∞—Ç–∏—è –Ω–∞ –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
        def respond(user_message, chat_history):
            bot_response = chat_response(user_message)
            chat_history.append({"role": "user", "content": user_message})
            chat_history.append({"role": "assistant", "content": bot_response})
            return chat_history, ""


        # –í—ã–∑–æ–≤ —Å–æ–±—ã—Ç–∏—è –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏ –Ω–∞ –∫–Ω–æ–ø–∫—É "–û—Ç–ø—Ä–∞–≤–∏—Ç—å"
        send_button.click(respond, inputs=[message, chatbot], outputs=[chatbot, message])

app.launch()